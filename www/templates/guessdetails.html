<ion-view view-title="Guess Details">
  <ion-content>
      <div class="card">
          <div class="item item-body item-text-wrap">
               <img class="full-image" ng-src="{{voted?guess.answerImage:guess.guessImage}}" alt="Guess Image">
                <h2>{{guess.guessName}} 
                <span class="badge badge-assertive">{{win?'win!':'won'}}</span></h2>
                <p>{{guess.description}}</p>
                <div class="form-group col-sm-5" ng-form name="myChoice">
                        <ul>
                            <li ng-repeat="option in guess.options">
                                <label>
                                    <input type="radio" id="answeroptions" name="answeroptions" value={{$index}} ng-model="answer.index" ng-disabled="!loggedIn || voted" required>{{option}}
                                </label>
                            </li>
                        </ul>
                        <button type="button" class="btn btn-primary" ng-click="choice()" ng-disabled="myChoice.$invalid || !loggedIn || voted">My answer</button>
                    </div>
          </div>
      </div>
      <div class="row">
            <div class="col col-offset-10">
                   <h4>Comments</h4>
                    <ul class="list">
                        <li ng-repeat="comment in guess.comments">
                          <blockquote>
                             <p>{{comment.comment}}</p>
                             <footer>{{comment.postedBy.firstname}} {{comment.postedBy.lastname}}, {{comment.createdAt | date:'MMM. dd, yyyy'}}</footer>
                          </blockquote>
                        </li>
                    </ul>
            </div>
      </div>
  </ion-content>
</ion-view>

<div class="container">
    <div class="row row-content">
        <div class="col-xs-12" ng-if="!showGuess">
            <h3>{{message}}</h3>
        </div>
        <div class="col-xs-12" ng-if="showGuess">
            <div class="media">
                <div class="media-left media-middle">
                    <a href="#">
                        <img class="img-preview media-object img-thumbnail" ng-src={{voted?guess.answerImage:guess.guessImage}} alt="Guess Image">
                    </a>
                </div>
                <div class="media-body">
                    <h2 class="media-heading">{{guess.guessName}}
                        <span class="label {{win?'label-info':'label-danger'}}" ng-if="voted">{{win?'win!':'won'}}</span> 
                    </h2>
                    <p>{{guess.description}}</p>
                    <div class="form-group col-sm-5" ng-form name="myChoice">
                        <ul>
                            <li ng-repeat="option in guess.options">
                                <label>
                                    <input type="radio" id="answeroptions" name="answeroptions" value={{$index}} ng-model="answer.index" ng-disabled="!loggedIn || voted" required>{{option}}
                                </label>
                            </li>
                        </ul>
                        <button type="button" class="btn btn-primary" ng-click="choice()" ng-disabled="myChoice.$invalid || !loggedIn || voted">My answer</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xs-9 col-xs-offset-1">
            <h4>Comments</h4>
            <ul class="list-unstyled">
                <li ng-repeat="comment in guess.comments">
                    <blockquote>
                        <p>{{comment.comment}}</p>
                        <footer>{{comment.postedBy.firstname}} {{comment.postedBy.lastname}}, {{comment.updatedAt | date:'MMM. dd,
                            yyyy'}}</footer>
                    </blockquote>
                </li>
            </ul>
        </div>
        <div class="col-xs-9 col-xs-offset-1">
            <ul class="list-unstyled" ng-show="commentForm.$valid && !commentForm.$pristine">
                <li>
                    <blockquote>
                        <p>{{mycomment.comment}}</p>
                    </blockquote>
                </li>
            </ul>
            <form class="form-horizontal" name="commentForm" ng-submit="submitComment()" novalidate>
                <div class="form-group" ng-class="{ 'has-error' : commentForm.comments.$error.required && !commentForm.comments.$pristine }">
                    <label for="comments" class="col-sm-2 control-label">Your Comments</label>
                    <div class="col-sm-10">
                        <textarea class="form-control" rows="12" name="comments" ng-model="mycomment.comment" required>
                            </textarea>
                        <span ng-show="commentForm.comments.$error.required && !commentForm.comments.$pristine" class="help-block">Your comments are required.</span>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-offset-2 col-sm-10">
                        <button type="submit" class="btn btn-primary" ng-disabled="commentForm.$invalid">Submit Comment</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>